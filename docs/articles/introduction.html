<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Brief introduction to ecr • ecr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">ecr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jakobbossek/ecr2">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Brief introduction to ecr</h1>
                        <h4 class="author">Jakob Bossek</h4>
            
            <h4 class="date">2017-05-09</h4>
          </div>

    
    
<div class="contents">
<div id="a-gentle-introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#a-gentle-introduction" class="anchor"></a>A gentle introduction</h1>
<p>The <strong>ecr</strong> package, <em>Evolutionary Computation in R (2nd version)</em>, is conceived as a “white-box” framework for single- and multi-objective optimization strongly inspired by the awesome <a href="https://github.com/DEAP/deap">Evolutionary Computation (EC) framework DEAP</a> for the Python programming language. In contrast to black-box frameworks, which usually try to hide as much of internal complexity (e.g., data structures) in opaque high-level EC components, <strong>ecr</strong> makes the development of evolutionary algorithms (EA) - as DEAP does - transparent: the evolutionary loop is written by hand sticking to few conventions, utilizing few simple utility functions and controlling everything. We believe, that this is the most flexible way in evolutionary algorithm design. On top <strong>ecr</strong> ships with a black-box for <em>standard tasks</em>, e.g., optimization of a continuous function, as well. The core features of ecr are the following</p>
<ul>
<li>Flexible <em>white-box</em> approach to EA design and implementation.</li>
<li>A lot of predefined EA operators for standard representations, i.e., permutations, binary strings and real-values vectors.</li>
<li>Powerful logging mechanism.</li>
<li>Possibility to use custom representations/genotypes.</li>
<li>Possibility to define custom EA operators, i.e., mutation, variation and selection operators.</li>
<li>Easy parallelization via <a href="https://cran.r-project.org/package=parallelMap">parallelMap</a>
</li>
<li>Black-box approach for standard tasks.</li>
<li>Single- and multi-objective optimization.</li>
<li>Implementations of some popular performance indicators in Evolutionary Multi-Objective Optimization (EMOA), e.g., hyper-volume-indicator, epsilon indicator as well as R1, R2 and R3 indicator.</li>
<li>Predefined state-of-the-art EMOA algorithms NSGA-II, SMS-EMOA and AS-EMOA.</li>
</ul>
<p>The best way to illustrate the process of algorithm design in <strong>ecr</strong> is by example. Assume we aim to find the global minimum of the highly multimodal one-dimensional Ackley-Function. The function is available in the R package <a href="https://cran.r-project.org/package=smoof">smoof</a> and may be initialized as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ecr)
<span class="co">#&gt; Lade nötiges Paket: BBmisc</span>
<span class="co">#&gt; Lade nötiges Paket: smoof</span>
<span class="co">#&gt; Lade nötiges Paket: ParamHelpers</span>
<span class="co">#&gt; Lade nötiges Paket: checkmate</span>
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(smoof)
fn =<span class="st"> </span><span class="kw">makeAckleyFunction</span>(1L)
pl =<span class="st"> </span><span class="kw">autoplot</span>(fn, <span class="dt">show.optimum=</span><span class="ot">TRUE</span>, <span class="dt">length.out =</span> <span class="dv">1000</span>)
<span class="kw">print</span>(pl)</code></pre></div>
<div class="figure">
<img src="introduction_files/figure-html/unnamed-chunk-2-1.png" alt="One-dimensional Ackley test function." width="576"><p class="caption">
One-dimensional Ackley test function.
</p>
</div>
<div id="writing-the-evolutionary-loop-by-hand" class="section level2">
<h2 class="hasAnchor">
<a href="#writing-the-evolutionary-loop-by-hand" class="anchor"></a>Writing the evolutionary loop by hand</h2>
<p>We decide to use an evolutionary <span class="math inline">\((30 + 5)\)</span>-strategy, i.e., an algorithm that keeps a population of size mu = 30, in each generation creates lambda = 5 offspring by variation and selects the best mu out of mu + lambda individuals to survive. First, we define some variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">MU =<span class="st"> </span>30L; LAMBDA =<span class="st"> </span>5L; MAX.ITER =<span class="st"> </span>200L
lower =<span class="st"> </span><span class="kw">getLowerBoxConstraints</span>(fn)
upper =<span class="st"> </span><span class="kw">getUpperBoxConstraints</span>(fn)</code></pre></div>
<p>In order to implement this algorithm the first step is to define a <em>control object</em>, which stores information on the objective function and a set of evolutionary operators.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">control =<span class="st"> </span><span class="kw"><a href="../reference/initECRControl.html">initECRControl</a></span>(fn)
control =<span class="st"> </span><span class="kw"><a href="../reference/registerECROperator.html">registerECROperator</a></span>(control, <span class="st">"mutate"</span>, mutGauss, <span class="dt">sdev =</span> <span class="dv">2</span>, <span class="dt">lower =</span> lower, <span class="dt">upper =</span> upper)
control =<span class="st"> </span><span class="kw"><a href="../reference/registerECROperator.html">registerECROperator</a></span>(control, <span class="st">"selectForSurvival"</span>, selGreedy)</code></pre></div>
<p>Here, we decide to perform mutation only. The best mu individuals (regarding fitness values) are going to be selected to build up the next generation.</p>
<p>Finally, the evolutionary loop is implemented.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">population =<span class="st"> </span><span class="kw"><a href="../reference/generators.html">genReal</a></span>(MU, <span class="kw">getNumberOfParameters</span>(fn), lower, upper)
fitness =<span class="st"> </span><span class="kw"><a href="../reference/evaluateFitness.html">evaluateFitness</a></span>(control, population)
for (i in <span class="kw">seq_len</span>(MAX.ITER)) {
    <span class="co"># sample lambda individuals at random</span>
    idx =<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span>:MU, LAMBDA)
    <span class="co"># generate offspring by mutation and evaluate their fitness</span>
    offspring =<span class="st"> </span><span class="kw"><a href="../reference/generateOffspring.html">mutate</a></span>(control, population[idx], <span class="dt">p.mut =</span> <span class="dv">1</span>)
    fitness.o =<span class="st"> </span><span class="kw"><a href="../reference/evaluateFitness.html">evaluateFitness</a></span>(control, offspring)

    <span class="co"># now select the best out of the union of population and offspring</span>
    sel =<span class="st"> </span><span class="kw"><a href="../reference/replace.html">replaceMuPlusLambda</a></span>(control, population, offspring, fitness, fitness.o)
    population =<span class="st"> </span>sel$population
    fitness =<span class="st"> </span>sel$fitness
}
<span class="kw">print</span>(<span class="kw">min</span>(fitness))
<span class="co">#&gt; [1] 0.04438188</span>
<span class="kw">print</span>(population[[<span class="kw">which.min</span>(fitness)]])
<span class="co">#&gt;            x </span>
<span class="co">#&gt; -0.009814595</span></code></pre></div>
<div id="black-box-approach" class="section level3">
<h3 class="hasAnchor">
<a href="#black-box-approach" class="anchor"></a>Black-box approach</h3>
<p>Since the optimization of a continuous numeric function is a standard task in EC, <strong>ecr</strong> ships with a black-box function <code><a href="../reference/ecr.html">ecr(...)</a></code> which basically is a customizable wrapper around the loop above. A lot of tasks can be accomplished by utlizing this single entry point. However, often EA design requires small tweaks, changes and adaptations which are simply impossible to realize with a black box regardless of their flexebility.</p>
<p>The optimization of our 1D Ackley-function via <code><a href="../reference/ecr.html">ecr(...)</a></code> might look like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res =<span class="st"> </span><span class="kw"><a href="../reference/ecr.html">ecr</a></span>(<span class="dt">fitness.fun =</span> fn, <span class="dt">representation =</span> <span class="st">"float"</span>,
  <span class="dt">n.dim =</span> <span class="kw">getNumberOfParameters</span>(fn), <span class="dt">survival.strategy =</span> <span class="st">"plus"</span>,
  <span class="dt">lower =</span> lower, <span class="dt">upper =</span> upper,
  <span class="dt">mu =</span> MU, <span class="dt">lambda =</span> LAMBDA,
  <span class="dt">mutator =</span> <span class="kw"><a href="../reference/setup.html">setup</a></span>(mutGauss, <span class="dt">sdev =</span> <span class="dv">2</span>, <span class="dt">lower =</span> lower, <span class="dt">upper =</span> upper),
  <span class="dt">terminators =</span> <span class="kw">list</span>(<span class="kw"><a href="../reference/stoppingConditions.html">stopOnIters</a></span>(MAX.ITER)))
<span class="kw">print</span>(res$best.y)
<span class="co">#&gt; [1] 0.0004027943</span>
<span class="kw">print</span>(res$best.x)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt;            x </span>
<span class="co">#&gt; 0.0001005639 </span>
<span class="co">#&gt; attr(,"fitness")</span>
<span class="co">#&gt; [1] 0.0004027943</span></code></pre></div>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#a-gentle-introduction">A gentle introduction</a><ul class="nav nav-pills nav-stacked">
<li><a href="#writing-the-evolutionary-loop-by-hand">Writing the evolutionary loop by hand</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jakob Bossek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
